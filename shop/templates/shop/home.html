{% extends "shop/base.html" %}
{% load static %}
{% load humanize %}
{% block content %}

<!-- Slider Principal (full-bleed) -->
<div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active"></button>
    <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1"></button>
    <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2"></button>
  </div>

  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="{% static 'shop/images/slider1.png' %}" class="d-block w-100 carousel-img" alt="Slider 1">
    </div>
    <div class="carousel-item">
      <img src="{% static 'shop/images/slider2.png' %}" class="d-block w-100 carousel-img" alt="Slider 2">
    </div>
    <div class="carousel-item">
      <img src="{% static 'shop/images/slider3.png' %}" class="d-block w-100 carousel-img" alt="Slider 3">
    </div>
  </div>

  <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>

<!-- Marcas -->
<div class="brand-slider px-3 py-2">
  {% for marca in brands %}
    <a href="{% url 'products_by_brand' marca %}" class="brand-item text-center text-decoration-none">
      <img src="{% static 'shop/images/LogoMarca/'|add:marca|add:'.png' %}" alt="{{ marca }}">
      <span>{{ marca }}</span>
    </a>
  {% endfor %}
</div>

<!-- Lo m치s vendido (cards) -->
<section class="container my-4">
  <h2 class="section-title justify-content-center">
    <span class="accent"></span> Lo m치s vendido
  </h2>

  <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-4">
    {% for p in best_sellers %}
      <div class="col">
        <div class="best-card h-100 p-3 d-flex flex-column">
          <a href="{% url 'product_detail' p.id %}"
             class="text-decoration-none text-reset d-flex flex-column align-items-center">
            {% static 'shop/images/placeholder.png' as ph %}
            {% if p.image %}
              <img class="best-img mb-2" src="{{ p.image.url }}" alt="{{ p.name }}" loading="lazy">
            {% else %}
              <img class="best-img mb-2" src="{{ ph }}" alt="{{ p.name }}" loading="lazy">
            {% endif %}
            <h3 class="best-title fw-semibold text-center mb-1">
              {{ p.name|truncatechars:80 }}
            </h3>
          </a>

          <div class="mt-auto text-center">
            <div class="price-main mb-2">
              ${{ p.price|floatformat:0|intcomma }}
            </div>
            <a href="{% url 'product_detail' p.id %}" class="btn btn-primary btn-sm">
              Ver m치s
            </a>
          </div>
        </div>
      </div>
    {% empty %}
      <p class="text-muted">A칰n no hay productos destacados.</p>
    {% endfor %}
  </div>
</section>

<!-- Servicios -->
<div class="container mt-5 py-4 bg-light rounded">
  <div class="row align-items-center">
    <div class="col-md-6 text-center">
      <img src="{% static 'shop/images/servicio-mecanico.png' %}" alt="Servicios" class="img-fluid" style="max-height:250px;">
    </div>
    <div class="col-md-6">
      <h4>游댢 Servicios de Mec치nica</h4>
      <p>Ofrecemos servicios de reparaci칩n, diagn칩stico y mantenimiento automotriz profesional. Tu veh칤culo en manos expertas.</p>
      <a href="{% url 'about' %}" class="btn btn-dark">Conoc칠 m치s</a>
    </div>
  </div>
</div>

{% endblock %}
